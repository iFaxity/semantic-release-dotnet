@ifaxity/semantic-release-dotnet
===================================

[**semantic-release**](https://github.com/semantic-release/semantic-release) plugin to package and publish a package via NuGet using the dotnet-cli.

[![Codacy grade](https://img.shields.io/codacy/grade/a0c628b128c044269faefc1da74382f7?style=for-the-badge&logo=codacy)](https://www.codacy.com/gh/iFaxity/semantic-release-dotnet/dashboard)
[![npm (scoped)](https://img.shields.io/npm/v/semantic-release-dotnet?style=for-the-badge&logo=npm)](https://npmjs.org/package/@ifaxity/semantic-release-dotnet)
[![npm bundle size (scoped)](https://img.shields.io/bundlephobia/min/semantic-release-dotnet?label=Bundle%20size&style=for-the-badge)](https://npmjs.org/package/@ifaxity/semantic-release-dotnet)
[![npm bundle size (scoped)](https://img.shields.io/bundlephobia/minzip/semantic-release-dotnet?label=Bundle%20size%20%28gzip%29&style=for-the-badge)](https://npmjs.org/package/@ifaxity/semantic-release-dotnet)

| Step               | Description                                                                                             |
|--------------------|---------------------------------------------------------------------------------------------------------|
| `verifyConditions` | Execute a shell command to verify if the release should happen.                                         |
| `prepare`          | Execute a shell command to prepare the release.                                                         |


Install
--------------------------

```bash
$ npm i --save-dev @ifaxity/semantic-release-dotnet
```


Usage
--------------------------

The plugin can be configured in the [**semantic-release** configuration file](https://github.com/semantic-release/semantic-release/blob/master/docs/usage/configuration.md#configuration):

```json
{
  "plugins": [
    "@semantic-release/commit-analyzer",
    "@semantic-release/release-notes-generator",
    ["@ifaxity/semantic-release-dotnet" {

    }],
  ]
}
```

With this example:
- the shell command `./verify.sh` will be executed on the [verify conditions step](https://github.com/semantic-release/semantic-release#release-steps)
- the shell command `./publish.sh 1.0.0 master 3 870668040000` (for the release of version `1.0.0` from branch `master` with `3` commits on `August 4th, 1997 at 2:14 AM`) will be executed on the [publish step](https://github.com/semantic-release/semantic-release#release-steps)

**Note**: it's recommended to include @ifaxity/semantic-release-dotnet directly before this plugin or some other custom way.


Configuration
--------------------------

### Environment variables

| Variable            | Description                                                                                                                   |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| `NUGET_PUSH_SOURCE` | Npm token created via [npm token create](https://docs.npmjs.com/getting-started/working_with_tokens#how-to-create-new-tokens) |
| `NUGET_TOKEN`       | Npm username created via [npm adduser](https://docs.npmjs.com/cli/adduser) or on [npmjs.com](https://www.npmjs.com)           |

### Options

| Options      | Description                                                                                                         | Default                                                                                                                          |
|--------------|---------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| `npmPublish` | Whether to publish the `npm` package to the registry. If `false` the `package.json` version will still be updated.  | `false` if the `package.json` [private](https://docs.npmjs.com/files/package.json#private) property is `true`, `true` otherwise. |
| `pkgRoot`    | Directory path to publish.                                                                                          | `.`                                                                                                                              |
| `tarballDir` | Directory path in which to write the package tarball. If `false` the tarball is not be kept on the file system.     | `false`                                                                                                                          |


License
--------------------------

[MIT](./LICENSE)
